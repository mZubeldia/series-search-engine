"use strict";const formElement=document.querySelector(".js-form"),searchButton=document.querySelector(".js-btn"),inputElement=document.querySelector(".js-input"),searchResultList=document.querySelector(".js-result"),favResultList=document.querySelector(".js-fav");let emptyImageURL="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",seriesData=[],favSeriesData=[];function handleBtn(e){e.preventDefault(),fetch("//api.tvmaze.com/search/shows?q="+inputElement.value).then(e=>e.json()).then(e=>{seriesData=e,renderSeries(),renderFavoriteSeries()})}function renderSeries(){let e="";for(const s of seriesData){e+=void 0===favSeriesData.find(e=>e.show.id===s.show.id)?`<li class="serie-item" data-id=${s.show.id}><h3 class="serie-title">${s.show.name}</h3>`:`<li class="serie-item fav-serie" data-id=${s.show.id}><h3 class="serie-title">${s.show.name}<span class="heart-emoji"> ❤️</span></h3>`,null===s.show.image?e+=`<img class="serie-img" src="${emptyImageURL}">`:e+=`<img class="serie-img" src="${s.show.image.medium}">`,e+="</li>"}searchResultList.innerHTML=e,addListenersToSeries(),addListenersToFav()}function renderFavoriteSeries(){let e="";for(const s of favSeriesData)e+=`<li class="fav-serie-item"><h3 class="serie-title">${s.show.name}</h3>`,null===s.show.image?e+=`<img class="serie-img" src="${emptyImageURL}">`:e+=`<img class="serie-img" src="${s.show.image.medium}">`,e+=`<button class="js-fav-listener btn-fav" data-id=${s.show.id}>X</button>`,e+="</li>";favResultList.innerHTML=e,addListenersToSeries(),addListenersToFav()}function addListenersToSeries(){const e=document.querySelectorAll(".serie-item");for(const s of e)s.addEventListener("click",handleClickSerie)}function addListenersToFav(){const e=document.querySelectorAll(".js-fav-listener");for(const s of e)s.addEventListener("click",handleClickSerie)}function handleClickSerie(e){const s=e.currentTarget,t=parseInt(s.dataset.id);if(void 0===favSeriesData.find(e=>e.show.id===t)){const e=seriesData.find(e=>e.show.id===t);favSeriesData.push(e)}else favSeriesData=favSeriesData.filter(e=>e.show.id!==t);renderSeries(),renderFavoriteSeries(),saveFavoritesLocal()}function saveFavoritesLocal(){localStorage.setItem("seriesFav",JSON.stringify(favSeriesData))}function getFavoritesLocal(){null!==localStorage.getItem("seriesFav")&&(favSeriesData=JSON.parse(localStorage.getItem("seriesFav")),renderFavoriteSeries())}searchButton.addEventListener("click",handleBtn),getFavoritesLocal();